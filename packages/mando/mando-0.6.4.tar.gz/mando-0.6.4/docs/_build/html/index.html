<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>mando - CLI interfaces for Humans &#8212; mando 0.2 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Usage" href="usage.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="usage.html" title="Usage"
             accesskey="N">next</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">mando 0.2 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="mando-cli-interfaces-for-humans">
<h1>mando - CLI interfaces for Humans<a class="headerlink" href="#mando-cli-interfaces-for-humans" title="Permalink to this headline">¶</a></h1>
<p>mando is a wrapper around <code class="docutils literal"><span class="pre">argparse</span></code>, allowing you to write complete CLI
applications in seconds while maintaining all the flexibility.</p>
<div class="section" id="the-problem">
<h2>The problem<a class="headerlink" href="#the-problem" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">argparse</span></code> is great for single-command applications, which only have some
options and one, default command. Unfortunately, when more commands are added,
the code grows too much along with its complexity.</p>
</div>
<div class="section" id="the-solution">
<h2>The solution<a class="headerlink" href="#the-solution" title="Permalink to this headline">¶</a></h2>
<p>mando makes an attempt to simplify this. Since commands are nothing but
functions, mando simply provides a couple of decorators and the job is done.
mando tries to infer as much as possible, in order to allow you to write just
the code that is strictly necessary.</p>
<p>This example should showcase most of mando&#8217;s features:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># gnu.py</span>
<span class="kn">from</span> <span class="nn">mando</span> <span class="k">import</span> <span class="n">main</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">arg</span>


<span class="nd">@arg</span><span class="p">(</span><span class="s1">&#39;maxdepth&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&lt;levels&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">maxdepth</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">P</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">D</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Mock some features of the GNU find command.</span>

<span class="sd">    This is not at all a complete program, but a simple representation to</span>
<span class="sd">    showcase mando&#39;s coolest features.</span>

<span class="sd">    :param path: The starting path.</span>
<span class="sd">    :param pattern: The pattern to look for.</span>
<span class="sd">    :param -d, --maxdepth &lt;int&gt;: Descend at most &lt;levels&gt;.</span>
<span class="sd">    :param -P: Do not follow symlinks.</span>
<span class="sd">    :param -D &lt;debug-opt&gt;: Debug option, print diagnostic information.&#39;&#39;&#39;</span>

    <span class="k">if</span> <span class="n">maxdepth</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">maxdepth</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;If you choose maxdepth, at least set it &gt; 1&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">P</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Following symlinks...&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Debug options: </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">D</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Starting search with pattern: </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pattern</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No file found!&#39;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>mando extracts information from your command&#8217;s docstring. So you can document
your code and create the CLI application at once! In the above example the
Sphinx format is used, but mando does not force you to write ReST docstrings.
Currently, it supports the following styles:</p>
<ul class="simple">
<li>Sphinx (the default one)</li>
<li>Google</li>
<li>Numpy</li>
</ul>
<p>To see how to specify the docstring format, see <a class="reference internal" href="usage.html#docstring-style"><span class="std std-ref">Other Docstring Formats</span></a>.</p>
<p>The first paragraph is taken
to generate the command&#8217;s <em>help</em>. The remaining part (after removing all
<code class="docutils literal"><span class="pre">:param:</span></code>&#8216;s) is the <em>description</em>. For everything that does not fit in the
docstring, mando provides the <code class="docutils literal"><span class="pre">&#64;arg</span></code> decorator, to override arbitrary
arguments before they get passed to <code class="docutils literal"><span class="pre">argparse</span></code>.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> python gnu.py -h
<span class="go">usage: gnu.py [-h] {find} ...</span>

<span class="go">positional arguments:</span>
<span class="go">  {find}</span>
<span class="go">    find      Mock some features of the GNU find command.</span>

<span class="go">optional arguments:</span>
<span class="go">  -h, --help  show this help message and exit</span>

<span class="gp">$</span> python gnu.py find -h
<span class="go">usage: gnu.py find [-h] [-d &lt;levels&gt;] [-P] [-D &lt;debug-opt&gt;] path pattern</span>

<span class="go">This is not at all a complete program, but a simple representation to showcase</span>
<span class="go">mando&#39;s coolest features.</span>

<span class="go">positional arguments:</span>
<span class="go">  path                  The starting path.</span>
<span class="go">  pattern               The pattern to look for.</span>

<span class="go">optional arguments:</span>
<span class="go">  -h, --help            show this help message and exit</span>
<span class="go">  -d &lt;levels&gt;, --maxdepth &lt;levels&gt;</span>
<span class="go">                        Descend at most &lt;levels&gt;.</span>
<span class="go">  -P                    Do not follow symlinks.</span>
<span class="go">  -D &lt;debug-opt&gt;        Debug option, print diagnostic information.</span>
</pre></div>
</div>
<p>As you can see the short options and metavars have been passed to argparse. Now
let&#8217;s check the program itself:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> python gnu.py find . <span class="s2">&quot;*.py&quot;</span>
<span class="go">Debug options: None</span>
<span class="go">Starting search with pattern: *.py</span>
<span class="go">No file found!</span>
<span class="gp">$</span> python gnu.py find . <span class="s2">&quot;*.py&quot;</span> -P
<span class="go">Following symlinks...</span>
<span class="go">Debug options: None</span>
<span class="go">Starting search with pattern: *.py</span>
<span class="go">No file found!</span>
<span class="gp">$</span> python gnu.py find . <span class="s2">&quot;*&quot;</span> -P -D dbg
<span class="go">Following symlinks...</span>
<span class="go">Debug options: dbg</span>
<span class="go">Starting search with pattern: *</span>
<span class="go">No file found!</span>
<span class="gp">$</span> python gnu.py find . <span class="s2">&quot;*&quot;</span> -P -D <span class="s2">&quot;dbg,follow,trace&quot;</span>
<span class="go">Following symlinks...</span>
<span class="go">Debug options: dbg,follow,trace</span>
<span class="go">Starting search with pattern: *</span>
<span class="go">No file found!</span>

<span class="gp">$</span> python gnu.py find -d <span class="m">1</span> . <span class="s2">&quot;*.pyc&quot;</span>
<span class="go">If you choose maxdepth, at least set it &gt; 1</span>
<span class="go">Debug options: None</span>
<span class="go">Starting search with pattern: *.pyc</span>
<span class="go">No file found!</span>
<span class="gp">$</span> python gnu.py find --maxdepth <span class="m">0</span> . <span class="s2">&quot;*.pyc&quot;</span>
<span class="go">If you choose maxdepth, at least set it &gt; 1</span>
<span class="go">Debug options: None</span>
<span class="go">Starting search with pattern: *.pyc</span>
<span class="go">No file found!</span>
<span class="gp">$</span> python gnu.py find --maxdepth <span class="m">4</span> . <span class="s2">&quot;*.pyc&quot;</span>
<span class="go">Debug options: None</span>
<span class="go">Starting search with pattern: *.pyc</span>
<span class="go">No file found!</span>

<span class="gp">$</span> python gnu.py find --maxdepth <span class="m">4</span> .
<span class="go">usage: gnu.py find [-h] [-d &lt;levels&gt;] [-P] [-D &lt;debug-opt&gt;] path pattern</span>
<span class="go">gnu.py find: error: too few arguments</span>
</pre></div>
</div>
</div>
<div class="section" id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="usage.html#defining-commands">Defining commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#long-and-short-options-flags">Long and short options (flags)</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#how-default-arguments-are-handled">How default arguments are handled</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#adding-type-and-metavar-in-the-docstring">Adding <em>type</em> and <em>metavar</em> in the docstring</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#overriding-arguments-with-arg">Overriding arguments with <code class="docutils literal"><span class="pre">&#64;arg</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#command-arguments"><code class="docutils literal"><span class="pre">&#64;command</span></code> Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#shell-autocompletion">Shell autocompletion</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">mando - CLI interfaces for Humans</a><ul>
<li><a class="reference internal" href="#the-problem">The problem</a></li>
<li><a class="reference internal" href="#the-solution">The solution</a></li>
<li><a class="reference internal" href="#contents">Contents</a></li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="usage.html"
                        title="next chapter">Usage</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="usage.html" title="Usage"
             >next</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">mando 0.2 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2013, Michele Lacchia.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.5.
    </div>
  </body>
</html>