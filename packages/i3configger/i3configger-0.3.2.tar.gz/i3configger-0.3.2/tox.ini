[tox]
skipsdist = True
envlist = tests

[testenv:tests]
usedevelop = True
deps =
    flake8
    pytest
commands =
    flake8
    pytest

[testenv:watch]
description = run i3configger in watch mode
whitelist_externals = i3configger
commands = i3configger --verbose --watch

[testenv:release]
description = create, push new tag and release
usedevelop = False
whitelist_externals = git
deps = pypandoc
commands =
    git tag {posargs}
    git push --tags
    python setup.py sdist upload

[testenv:clean]
description = clean up cruft
usedevelop = False
whitelist_externals = rm
commands =
    rm -rf {toxinidir}/.cache
    rm -rf {toxinidir}/.tox
    rm -rf {toxinidir}/build
    rm -rf {toxinidir}/dist
