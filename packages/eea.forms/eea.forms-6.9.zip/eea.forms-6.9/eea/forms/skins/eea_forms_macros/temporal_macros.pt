<tal:temporalCoverage metal:define-macro="temporal-coverage">
    <tal:render tal:define="value context/@@formatTempCoverage;
                            temporalCoverage python:value.split(',') if value else [];
                            portal_state context/@@plone_portal_state;
                            portal_url portal_state/portal_url;"
                tal:condition="value">
        <div class="temporal-coverage" id="tempCoverage">
            <!-- Title -->
            <h3 metal:define-slot="temporal-coverage-title" class="temporal-coverage-title notoc" i18n:translate="">
                Temporal coverage
            </h3>

            <!--- Body -->
            <metal:body metal:define-slot="temporal-coverage-body">
                <tal:temporal tal:repeat="temp temporalCoverage" tal:condition="python:value != '-1'">
                  <span>
                    <a class="link-category" rel="tag"
                       tal:attributes="href python:portal_url + '/@@search?SearchableText=' + temp"
                       tal:content="temp"></a>
                    <span class="separator" tal:condition="python:not repeat['temp'].end">,</span>
                  </span>
                </tal:temporal>
                <span tal:condition="python:value == '-1'">
                    <a i18n:translate="" class="link-category" rel="tag" href="#">
                        Dynamic
                    </a>
                </span>
            </metal:body>
        </div>
    </tal:render>
</tal:temporalCoverage>

<tal:block metal:define-macro="temporal-coverage-data">
    <tal:parent metal:use-macro="context/temporal_macros/macros/temporal-coverage">

        <!-- Override title -->
        <dt metal:fill-slot="temporal-coverage-title"
            tal:define="field python:context.getField('temporalCoverage')">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Temporal coverage:</span>
        </dt>

    </tal:parent>
</tal:block>
