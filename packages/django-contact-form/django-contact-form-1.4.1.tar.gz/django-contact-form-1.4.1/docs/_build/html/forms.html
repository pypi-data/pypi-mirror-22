

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Contact form classes &mdash; django-contact-form 1.4 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="django-contact-form 1.4 documentation" href="index.html"/>
        <link rel="next" title="Built-in views" href="views.html"/>
        <link rel="prev" title="Quick start guide" href="quickstart.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> django-contact-form
          

          
          </a>

          
            
            
              <div class="version">
                1.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation and configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick start guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html#url-configuration">URL configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html#required-templates">Required templates</a></li>
</ul>
<p class="caption"><span class="caption-text">For developers</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Contact form classes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-contactform-class">The ContactForm class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-akismet-spam-filtering-contact-form-class">The Akismet (spam-filtering) contact form class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="views.html">Built-in views</a></li>
</ul>
<p class="caption"><span class="caption-text">Other documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently asked questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">django-contact-form</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Contact form classes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/forms.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="module-contact_form.forms"><span id="forms"></span></span><div class="section" id="contact-form-classes">
<h1>Contact form classes<a class="headerlink" href="#contact-form-classes" title="Permalink to this headline">¶</a></h1>
<p>There are two contact-form classes included in django-contact-form;
one provides all the infrastructure for a contact form, and will
usually be the base class for subclasses which want to extend or
modify functionality. The other is a subclass which adds spam
filtering to the contact form.</p>
<div class="section" id="the-contactform-class">
<h2>The ContactForm class<a class="headerlink" href="#the-contactform-class" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="contact_form.forms.ContactForm">
<em class="property">class </em><code class="descclassname">contact_form.forms.</code><code class="descname">ContactForm</code><a class="headerlink" href="#contact_form.forms.ContactForm" title="Permalink to this definition">¶</a></dt>
<dd><p>The base contact form class from which all contact form classes
should inherit.</p>
<p>If you don’t need any customization, you can use this form to
provide basic contact-form functionality; it will collect name,
email address and message.</p>
<p>The <a class="reference internal" href="views.html#contact_form.views.ContactFormView" title="contact_form.views.ContactFormView"><code class="xref py py-class docutils literal"><span class="pre">ContactFormView</span></code></a> included in this
application knows how to work with this form and can handle many
types of subclasses as well (see below for a discussion of the
important points), so in many cases it will be all that you
need. If you’d like to use this form or a subclass of it from one
of your own views, here’s how:</p>
<ol class="arabic simple">
<li>When you instantiate the form, pass the current <code class="docutils literal"><span class="pre">HttpRequest</span></code>
object as the keyword argument <code class="docutils literal"><span class="pre">request</span></code>; this is used
internally by the base implementation, and also made available
so that subclasses can add functionality which relies on
inspecting the request (such as spam filtering).</li>
<li>To send the message, call the form’s <code class="docutils literal"><span class="pre">save</span></code> method, which
accepts the keyword argument <code class="docutils literal"><span class="pre">fail_silently</span></code> and defaults it
to <code class="docutils literal"><span class="pre">False</span></code>. This argument is passed directly to Django’s
<code class="docutils literal"><span class="pre">send_mail()</span></code> function, and allows you to suppress or raise
exceptions as needed for debugging. The <code class="docutils literal"><span class="pre">save</span></code> method has no
return value.</li>
</ol>
<p>Other than that, treat it like any other form; validity checks and
validated data are handled normally, through the <code class="docutils literal"><span class="pre">is_valid()</span></code>
method and the <code class="docutils literal"><span class="pre">cleaned_data</span></code> dictionary.</p>
<p>Under the hood, this form uses a somewhat abstracted interface in
order to make it easier to subclass and add functionality.</p>
<p>The following attributes play a role in determining behavior, and
any of them can be implemented as an attribute or as a method (for
example, if you wish to have <code class="docutils literal"><span class="pre">from_email</span></code> be dynamic, you can
implement a method named <code class="docutils literal"><span class="pre">from_email()</span></code> instead of setting the
attribute <code class="docutils literal"><span class="pre">from_email</span></code>):</p>
<dl class="attribute">
<dt id="contact_form.forms.ContactForm.from_email">
<code class="descname">from_email</code><a class="headerlink" href="#contact_form.forms.ContactForm.from_email" title="Permalink to this definition">¶</a></dt>
<dd><p>The email address to use in the <code class="docutils literal"><span class="pre">From:</span></code> header of the
message. By default, this is the value of the setting
<code class="docutils literal"><span class="pre">DEFAULT_FROM_EMAIL</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="contact_form.forms.ContactForm.recipient_list">
<code class="descname">recipient_list</code><a class="headerlink" href="#contact_form.forms.ContactForm.recipient_list" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of recipients for the message. By default, this is the
email addresses specified in the setting <code class="docutils literal"><span class="pre">MANAGERS</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="contact_form.forms.ContactForm.subject_template_name">
<code class="descname">subject_template_name</code><a class="headerlink" href="#contact_form.forms.ContactForm.subject_template_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the template to use when rendering the subject line
of the message. By default, this is
<code class="docutils literal"><span class="pre">contact_form/contact_form_subject.txt</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="contact_form.forms.ContactForm.template_name">
<code class="descname">template_name</code><a class="headerlink" href="#contact_form.forms.ContactForm.template_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the template to use when rendering the body of the
message. By default, this is <code class="docutils literal"><span class="pre">contact_form/contact_form.txt</span></code>.</p>
</dd></dl>

<p>And two methods are involved in producing the contents of the
message to send:</p>
<dl class="method">
<dt id="contact_form.forms.ContactForm.message">
<code class="descname">message</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#contact_form.forms.ContactForm.message" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the body of the message to send. By default, this is
accomplished by rendering the template name specified in
<a class="reference internal" href="#contact_form.forms.ContactForm.template_name" title="contact_form.forms.ContactForm.template_name"><code class="xref py py-attr docutils literal"><span class="pre">template_name</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="contact_form.forms.ContactForm.subject">
<code class="descname">subject</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#contact_form.forms.ContactForm.subject" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the subject line of the message to send. By default,
this is accomplished by rendering the template name specified
in <a class="reference internal" href="#contact_form.forms.ContactForm.subject_template_name" title="contact_form.forms.ContactForm.subject_template_name"><code class="xref py py-attr docutils literal"><span class="pre">subject_template_name</span></code></a>.</p>
</dd></dl>

<p>Finally, the message itself is generated by the following two
methods:</p>
<dl class="method">
<dt id="contact_form.forms.ContactForm.get_message_dict">
<code class="descname">get_message_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#contact_form.forms.ContactForm.get_message_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>This method loops through <a class="reference internal" href="#contact_form.forms.ContactForm.from_email" title="contact_form.forms.ContactForm.from_email"><code class="xref py py-attr docutils literal"><span class="pre">from_email</span></code></a>,
<a class="reference internal" href="#contact_form.forms.ContactForm.recipient_list" title="contact_form.forms.ContactForm.recipient_list"><code class="xref py py-attr docutils literal"><span class="pre">recipient_list</span></code></a>, <a class="reference internal" href="#contact_form.forms.ContactForm.message" title="contact_form.forms.ContactForm.message"><code class="xref py py-meth docutils literal"><span class="pre">message()</span></code></a> and <a class="reference internal" href="#contact_form.forms.ContactForm.subject" title="contact_form.forms.ContactForm.subject"><code class="xref py py-meth docutils literal"><span class="pre">subject()</span></code></a>,
collecting those parts into a dictionary with keys
corresponding to the arguments to Django’s <code class="docutils literal"><span class="pre">send_mail</span></code>
function, then returns the dictionary. Overriding this allows
essentially unlimited customization of how the message is
generated. Note that for compatibility, implementations which
override this should support callables for the values of
<code class="docutils literal"><span class="pre">from_email</span></code> and <code class="docutils literal"><span class="pre">recipient_list</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="contact_form.forms.ContactForm.get_context">
<code class="descname">get_context</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#contact_form.forms.ContactForm.get_context" title="Permalink to this definition">¶</a></dt>
<dd><p>For methods which render portions of the message using
templates (by default, <a class="reference internal" href="#contact_form.forms.ContactForm.message" title="contact_form.forms.ContactForm.message"><code class="xref py py-meth docutils literal"><span class="pre">message()</span></code></a> and <a class="reference internal" href="#contact_form.forms.ContactForm.subject" title="contact_form.forms.ContactForm.subject"><code class="xref py py-meth docutils literal"><span class="pre">subject()</span></code></a>),
generates the context used by those templates. The default
context will be a <code class="docutils literal"><span class="pre">RequestContext</span></code> (using the current HTTP
request, so user information is available), plus the contents
of the form’s <code class="docutils literal"><span class="pre">cleaned_data</span></code> dictionary, and one additional
variable:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">site</span></code></dt>
<dd>If <code class="docutils literal"><span class="pre">django.contrib.sites</span></code> is installed, the
currently-active <code class="docutils literal"><span class="pre">Site</span></code> object. Otherwise, a
<code class="docutils literal"><span class="pre">RequestSite</span></code> object generated from the request.</dd>
</dl>
</dd></dl>

<p>Meanwhile, the following attributes/methods generally should not
be overridden; doing so may interfere with functionality, may not
accomplish what you want, and generally any desired customization
can be accomplished in a more straightforward way through
overriding one of the attributes/methods listed above.</p>
<dl class="attribute">
<dt id="contact_form.forms.ContactForm.request">
<code class="descname">request</code><a class="headerlink" href="#contact_form.forms.ContactForm.request" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="docutils literal"><span class="pre">HttpRequest</span></code> object representing the current
request. This is set automatically in <code class="docutils literal"><span class="pre">__init__()</span></code>, and is
used both to generate a <code class="docutils literal"><span class="pre">RequestContext</span></code> for the templates
and to allow subclasses to engage in request-specific behavior.</p>
</dd></dl>

<dl class="method">
<dt id="contact_form.forms.ContactForm.save">
<code class="descname">save</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#contact_form.forms.ContactForm.save" title="Permalink to this definition">¶</a></dt>
<dd><p>If the form has data and is valid, will send the email, by
calling <a class="reference internal" href="#contact_form.forms.ContactForm.get_message_dict" title="contact_form.forms.ContactForm.get_message_dict"><code class="xref py py-meth docutils literal"><span class="pre">get_message_dict()</span></code></a> and passing the result to
Django’s <code class="docutils literal"><span class="pre">send_mail</span></code> function.</p>
</dd></dl>

<p>Note that subclasses which override <code class="docutils literal"><span class="pre">__init__</span></code> or <a class="reference internal" href="#contact_form.forms.ContactForm.save" title="contact_form.forms.ContactForm.save"><code class="xref py py-meth docutils literal"><span class="pre">save()</span></code></a>
need to accept <code class="docutils literal"><span class="pre">*args</span></code> and <code class="docutils literal"><span class="pre">**kwargs</span></code>, and pass them via
<code class="docutils literal"><span class="pre">super</span></code>, in order to preserve behavior (each of those methods
accepts at least one additional argument, and this application
expects and requires them to do so).</p>
</dd></dl>

</div>
<div class="section" id="the-akismet-spam-filtering-contact-form-class">
<h2>The Akismet (spam-filtering) contact form class<a class="headerlink" href="#the-akismet-spam-filtering-contact-form-class" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="contact_form.forms.AkismetContactForm">
<em class="property">class </em><code class="descclassname">contact_form.forms.</code><code class="descname">AkismetContactForm</code><a class="headerlink" href="#contact_form.forms.AkismetContactForm" title="Permalink to this definition">¶</a></dt>
<dd><p>A subclass of <a class="reference internal" href="#contact_form.forms.ContactForm" title="contact_form.forms.ContactForm"><code class="xref py py-class docutils literal"><span class="pre">ContactForm</span></code></a> which adds spam filtering, via
<a class="reference external" href="https://akismet.com/">the Wordpress Akismet spam-detection service</a>.</p>
<p>Use of this class requires you to provide configuration for the
Akismet web service; you’ll need to obtain an Akismet API key, and
you’ll need to associate it with the site you’ll use the contact
form on. You can do this at &lt;<a class="reference external" href="https://akismet.com/">https://akismet.com/</a>&gt;. Once you have,
you can configure in either of two ways:</p>
<ol class="arabic simple">
<li>Put your Akismet API key in the Django setting
<code class="docutils literal"><span class="pre">AKISMET_API_KEY</span></code>, and the URL it’s associated with in the
setting <code class="docutils literal"><span class="pre">AKISMET_BLOG_URL</span></code>, or</li>
<li>Put your Akismet API key in the environment variable
<code class="docutils literal"><span class="pre">PYTHON_AKISMET_API_KEY</span></code>, and the URL it’s associated with in
the environment variable <code class="docutils literal"><span class="pre">PYTHON_AKISMET_BLOG_URL</span></code>.</li>
</ol>
<p>You will also need <a class="reference external" href="http://akismet.readthedocs.io/">the Python Akismet module</a> to communicate with the Akismet
web service. You can install it by running <code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">akismet</span></code>,
or django-contact-form can install it automatically for you if you
run <code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">django-contact-form[akismet]</span></code>.</p>
<p>Once you have an Akismet API key and URL configured, and the
<code class="docutils literal"><span class="pre">akismet</span></code> module installed, you can drop in
<code class="docutils literal"><span class="pre">AkismetContactForm</span></code> anywhere you would have used
<a class="reference internal" href="#contact_form.forms.ContactForm" title="contact_form.forms.ContactForm"><code class="xref py py-class docutils literal"><span class="pre">ContactForm</span></code></a>. For example, you could define a view
(subclassing <a class="reference internal" href="views.html#contact_form.views.ContactFormView" title="contact_form.views.ContactFormView"><code class="xref py py-class docutils literal"><span class="pre">ContactFormView</span></code></a>) like so,
and then point a URL at it:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">contact_form.forms</span> <span class="kn">import</span> <span class="n">AkismetContactForm</span>
<span class="kn">from</span> <span class="nn">contact_form.views</span> <span class="kn">import</span> <span class="n">ContactFormView</span>

<span class="k">class</span> <span class="nc">AkismetContactFormView</span><span class="p">(</span><span class="n">ContactFormView</span><span class="p">):</span>
    <span class="n">form_class</span> <span class="o">=</span> <span class="n">AkismetContactForm</span>
</pre></div>
</div>
<p>Or directly specify the form in your URLconf:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>

<span class="kn">from</span> <span class="nn">contact_form.forms</span> <span class="kn">import</span> <span class="n">AkismetContactForm</span>
<span class="kn">from</span> <span class="nn">contact_form.views</span> <span class="kn">import</span> <span class="n">ContactFormView</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># other URL patterns...</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^contact-form/$&#39;</span><span class="p">,</span>
        <span class="n">ContactForm</span><span class="o">.</span><span class="n">as_view</span><span class="p">(</span>
            <span class="n">form_class</span><span class="o">=</span><span class="n">AkismetContactForm</span>
        <span class="p">),</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;contact_form&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="views.html" class="btn btn-neutral float-right" title="Built-in views" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="quickstart.html" class="btn btn-neutral" title="Quick start guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2007-2016, James Bennett.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>